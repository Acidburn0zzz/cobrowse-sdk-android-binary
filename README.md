# CobrowseIO SDK - Remote Screenshare Service

With [Cobrowse.io](https://cobrowse.io)'s screen sharing technology for mobile apps you can see *exactly* what your customer sees on their mobile device, and provide realtime annotations to help solve customer support queries quickly.

## Try it out

You can try the Cobrowse.io service for **free** and **without signing up for an account**. Just follow the installation instructions below, then head to <https://cobrowse.io/trial> to use the trial dashboard.

These instructions will install a binary distribution of the Cobrowse.io SDK. Customers with a paid subscription can request source code access by [emailing us](mailto:hello@cobrowse.io).

## Installation

Cobrowse uses a maven distribution. Add these lines to your gradle files:

**In your project build.gradle**
Esnure that JCenter is added to your list of repositories:
```gradle
repositories {
    jcenter()
}
```

**In your app build.gradle**
```gradle
dependencies {
    // ... other dependencies ...
    implementation 'io.cobrowse:cobrowse-sdk-android:1.+'
}
```

## Basic Setup

To use CobrowseIO in your project add this to your Application subclass:

```java
package com.example;

import android.app.Application;
import io.cobrowse.core.CobrowseIO;

public class MainApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();

        CobrowseIO.instance().license("trial");
        CobrowseIO.instance().start(this);
    }
}
```

### Using the default UI
If you want to allow your users to generate a code from their app to initiate a session, we have provided some default UI to make things easier:

```java
import io.cobrowse.ui.CobrowseActivity;

public class YourActivity extends Activity {

    // the rest of your Activity

    public void startCobrowse(View view) {
        Intent intent = new Intent(this, CobrowseActivity.class);
        startActivity(intent);
    }
}
```

Make sure you've hooked up a trigger for the `startCobrowse` method that we've just added. By default your apps will register with a trial license, so you can access the them from <https://cobrowse.io/trial>. Enter the 6 digit code that will be generated by your app when you trigger the action!

## Configuration

Once you've tested out your app using the trial dashboard you're ready to create an account and add in the free license key to your app. This will associate sessions from your mobile app with your Cobrowse account.

### Add your license key
Once you've signed up for a free account at [cobrowse.io](https://cobrowse.io), you'll be able to find your license key at <https://cobrowse.io/dashboard/settings>. Add this to your SDK setup:
```java
CobrowseIO.instance().license("<your license key here>");
```
**Important:** Make sure you do this in your custom Application subclass `onCreate()` to ensure devices register in your dashboard right away.

## Agent Initiated Sessions

Cobrowse.io also support sessions that initiated by support agents, via their dashboard. To do this we use a push notification to the device. To set up agent initiated sessions:

1. Set up Firebase Cloud Messaging for your app. See the latest Firebase documentation for instructions.
2. Enter your Server Key from the FCM admin settings into the Cobrowse account settings at: https://cobrowse.io/dashboard/settings
3. Whenever your device receives a registration token from FCM, pass that to the Cobrowse SDK, for example:

```java
package com.example;

import com.google.firebase.iid.FirebaseInstanceId;
import com.google.firebase.iid.FirebaseInstanceIdService;

import io.cobrowse.core.CobrowseIO;

public class FirebaseIdService  extends FirebaseInstanceIdService {

    @Override
    public void onTokenRefresh() {
        String refreshedToken = FirebaseInstanceId.getInstance().getToken();
        CobrowseIO.instance().setDeviceToken(getApplication(), refreshedToken);
    }
}
```
4. Similarly, whenever you receive a push notification, forward that on to the Cobrowse SDK:

```java
package com.example;

import com.google.firebase.messaging.FirebaseMessagingService;
import com.google.firebase.messaging.RemoteMessage;

import io.cobrowse.core.CobrowseIO;

public class FirebaseMessaging extends FirebaseMessagingService {

    @Override
    public void onMessageReceived(RemoteMessage remoteMessage) {
        CobrowseIO.instance().onPushNotification(remoteMessage.getData());
    }
}
```

## Requirements

* API version 19 or later
